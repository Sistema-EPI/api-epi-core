generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum CompanyStatus {
  ATIVO
  INATIVO
}

model Companies {
  idEmpresa      String        @id @default(uuid()) @map("id_empresa") @db.VarChar(36)
  nomeFantasia  String         @map("nome_fantasia") @db.VarChar(255)
  razaoSocial   String?        @map("razao_social") @db.VarChar(255)
  cnpj          String         @unique @map("cnpj") @db.VarChar(14)
  uf            String?        @map("uf") @db.VarChar(2)
  cep           String         @map("cep") @db.VarChar(8)
  logradouro    String?        @map("logradouro") @db.VarChar(255)
  email         String?        @map("email") @db.VarChar(255)
  telefone      String?        @map("telefone") @db.VarChar(20)
  statusEmpresa CompanyStatus  @default(ATIVO) @map("status_empresa")
  createdAt     DateTime       @default(now()) @map("created_at") @db.DateTime(0)
  updatedAt     DateTime       @updatedAt @map("updated_at") @db.DateTime(0)
  colaboradores Collaborator[] @relation("EmpresaColaboradores")

  @@map("companies")
}

model Collaborator {
  idColaborador     String   @id @default(uuid()) @map("id_colaborador") @db.VarChar(36)
  idEmpresa         String   @map("id_empresa") @db.VarChar(36)
  nomeColaborador   String   @map("nome_colaborador") @db.VarChar(255)
  cpf               String   @unique @map("cpf") @db.VarChar(11)
  statusColaborador String?  @map("status_colaborador") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at") @db.DateTime(0)
  updatedAt         DateTime @updatedAt @map("updated_at") @db.DateTime(0)
  empresa           Companies @relation("EmpresaColaboradores", fields: [idEmpresa], references: [idEmpresa], onDelete: Cascade)
  
  @@map("collaborator")
}